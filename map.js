var map,options={zoom:6,center:{lat:53.4808,lng:-2.2426}};function initMap(){map=new google.maps.Map(document.getElementById("map"),options)}function getJson(e){var a=new XMLHttpRequest;a.onreadystatechange=function(){4==this.readyState&&200==this.status&&initialMarkers(JSON.parse(a.responseText),e)},a.open("GET",e,!0),a.send(null)}function initialMarkers(e,a){var n;if("data/events.json"==a){n="http://maps.google.com/mapfiles/ms/icons/red-dot.png";for(var t=0;t<e.length;t++){addMarkers(o={lat:parseFloat(e[t].geo.lat),lng:parseFloat(e[t].geo.lng)},n,e[t].title,e[t].url,e[t].date)}}else{n="http://maps.google.com/mapfiles/ms/icons/green-dot.png";var o={lat:parseFloat(e.geo.lat),lng:parseFloat(e.geo.lng)};new google.maps.Marker({position:o,map:map,icon:n})}}function addMarkers(e,a,n,t,o){var s=new google.maps.Marker({position:e,map:map,icon:a});content='<h5><a href="'+t+'">'+n+"</a></h5><p>"+o+"</p>";var p=new google.maps.InfoWindow({content:content});s.addListener("click",function(){p.open(map,s)})}getJson("data/events.json"),getJson("data/user.json");